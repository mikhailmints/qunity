#!/usr/bin/env bash

dune build
rm -f qasm_out/*.qasm

if $analyze; then
    rm -f diagrams/circuits/*
    rm -f diagrams/sim_results/*
fi

for filename in examples/*.qunity; do
    echo ====================
    echo $filename
    ./qunity-compile $filename --nobuild "$@"
    echo
done

if $analyze; then
    echo ====================
    python3 qasm_analyze.py qasm_out
fi
